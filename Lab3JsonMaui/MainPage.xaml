<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Lab3JsonMaui.MainPage"
             Title="Студентський парламент">

    <ContentPage.Resources>
        <Style TargetType="Label">
            <Setter Property="Margin" Value="2" />
            <Setter Property="VerticalTextAlignment" Value="Center" />
        </Style>
        <Style TargetType="Entry">
            <Setter Property="Margin" Value="2" />
        </Style>
        <Style TargetType="Button">
            <Setter Property="Margin" Value="4" />
        </Style>
    </ContentPage.Resources>

    <Grid RowDefinitions="Auto, Auto, * , Auto"
          Padding="10">

        <!-- Верхня панель кнопок -->
        <HorizontalStackLayout Grid.Row="0"
                               Spacing="8">
            <Button Text="Відкрити JSON"
                    Clicked="OnOpenJsonClicked" />
            <Button Text="Зберегти"
                    Clicked="OnSaveJsonClicked" />
            <Button Text="Про програму"
                    Clicked="OnAboutClicked" />
        </HorizontalStackLayout>

        <!-- Панель пошуку (мінімум 3 критерії через LINQ) -->
        <Grid Grid.Row="1"
              Margin="0,10,0,10"
              RowDefinitions="Auto, Auto"
              ColumnDefinitions="*,*,*">
            <!-- 1: факультет -->
            <VerticalStackLayout Grid.Row="0" Grid.Column="0">
                <Label Text="Факультет містить:" />
                <Entry x:Name="FacultyFilterEntry" Placeholder="наприклад, ФКНК" />
            </VerticalStackLayout>

            <!-- 2: спеціальність -->
            <VerticalStackLayout Grid.Row="0" Grid.Column="1">
                <Label Text="Спеціальність містить:" />
                <Entry x:Name="SpecialityFilterEntry" Placeholder="Комп'ютерні науки" />
            </VerticalStackLayout>

            <!-- 3: тип заходу -->
            <VerticalStackLayout Grid.Row="0" Grid.Column="2">
                <Label Text="Тип заходу містить:" />
                <Entry x:Name="EventTypeFilterEntry" Placeholder="збори, тренінг..." />
            </VerticalStackLayout>

            <HorizontalStackLayout Grid.Row="1"
                                   Grid.ColumnSpan="3"
                                   HorizontalOptions="End">
                <Button Text="Застосувати фільтр"
                        Clicked="OnApplyFilterClicked" />
                <Button Text="Скинути"
                        Clicked="OnClearFilterClicked" />
            </HorizontalStackLayout>
        </Grid>

        <!-- Табличне відображення (Grid усередині елемента списку) -->
        <Grid Grid.Row="2"
              RowDefinitions="Auto, *">
            <!-- Заголовок таблиці -->
            <Grid ColumnDefinitions="2*,2*,2*,2*,2*,2*"
                  BackgroundColor="#eeeeee"
                  Padding="4">
                <Label Text="П.І.П." Grid.Column="0" FontAttributes="Bold" />
                <Label Text="Факультет" Grid.Column="1" FontAttributes="Bold" />
                <Label Text="Кафедра" Grid.Column="2" FontAttributes="Bold" />
                <Label Text="Спеціальність" Grid.Column="3" FontAttributes="Bold" />
                <Label Text="Тип заходу" Grid.Column="4" FontAttributes="Bold" />
                <Label Text="Часові рамки" Grid.Column="5" FontAttributes="Bold" />
            </Grid>

            <!-- Список -->
            <CollectionView x:Name="EventsCollection"
                            Grid.Row="1"
                            SelectionMode="Single"
                            ItemsSource="{Binding Events}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Grid ColumnDefinitions="2*,2*,2*,2*,2*,2*"
                              Padding="4"
                              RowSpacing="0">
                            <Label Text="{Binding FullName}"
                                   Grid.Column="0" />
                            <Label Text="{Binding Faculty}"
                                   Grid.Column="1" />
                            <Label Text="{Binding Department}"
                                   Grid.Column="2" />
                            <Label Text="{Binding Speciality}"
                                   Grid.Column="3" />
                            <Label Text="{Binding EventType}"
                                   Grid.Column="4" />
                            <Label Text="{Binding TimeFrame}"
                                   Grid.Column="5" />
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>

        <!-- Форма додавання / редагування -->
        <Border Grid.Row="3"
                BackgroundColor="#f5f5f5"
                Stroke="#cccccc"
                StrokeShape="RoundRectangle 8"
                Padding="10"
                Margin="0,10,0,0">
            <VerticalStackLayout>
                <Label Text="Форма редагування події"
                       FontAttributes="Bold"
                       Margin="0,0,0,6" />

                <Grid ColumnDefinitions="*,*"
                      RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto">

                    <Label Text="П.І.П." Grid.Row="0" Grid.Column="0" />
                    <Entry x:Name="FullNameEntry" Grid.Row="0" Grid.Column="1" />

                    <Label Text="Факультет" Grid.Row="1" Grid.Column="0" />
                    <Entry x:Name="FacultyEntry" Grid.Row="1" Grid.Column="1" />

                    <Label Text="Кафедра" Grid.Row="2" Grid.Column="0" />
                    <Entry x:Name="DepartmentEntry" Grid.Row="2" Grid.Column="1" />

                    <Label Text="Спеціальність" Grid.Row="3" Grid.Column="0" />
                    <Entry x:Name="SpecialityEntry" Grid.Row="3" Grid.Column="1" />

                    <Label Text="Тип заходу" Grid.Row="4" Grid.Column="0" />
                    <Entry x:Name="EventTypeEntry" Grid.Row="4" Grid.Column="1" />

                    <Label Text="Часові рамки" Grid.Row="5" Grid.Column="0" />
                    <Entry x:Name="TimeFrameEntry" Grid.Row="5" Grid.Column="1"
                           Placeholder="дата / час, напр. 10.10.2025 16:00-18:00" />

                    <Label Text="Опис" Grid.Row="6" Grid.Column="0" />
                    <Entry x:Name="DescriptionEntry" Grid.Row="6" Grid.Column="1" />
                </Grid>

                <HorizontalStackLayout HorizontalOptions="End">
                    <Button Text="Додати"
                            Clicked="OnAddClicked" />
                    <Button Text="Змінити"
                            Clicked="OnEditClicked" />
                    <Button Text="Видалити"
                            Clicked="OnDeleteClicked" />
                    <Button Text="Очистити форму"
                            Clicked="OnClearFormClicked" />
                </HorizontalStackLayout>
            </VerticalStackLayout>
        </Border>
    </Grid>
</ContentPage>